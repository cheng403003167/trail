require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({22:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("babel-runtime/core-js/object/get-prototype-of"),t=E(e),a=require("babel-runtime/helpers/classCallCheck"),l=E(a),r=require("babel-runtime/helpers/createClass"),n=E(r),u=require("babel-runtime/helpers/possibleConstructorReturn"),i=E(u),o=require("babel-runtime/helpers/inherits"),d=E(o),c=require("react"),s=E(c),m=require("../../layouts/default"),f=E(m),v=require("../../lib"),p=require("react-router-dom"),h=require("antd"),y=require("moment"),b=E(y);function E(e){return e&&e.__esModule?e:{default:e}}require("moment/locale/zh-cn");var g=h.Tabs.TabPane,_=window.DPlayer,q="http://www.dnitu.top/";b.default.locale("zh-cn");var k=function(e){console.log(e)},N=function(e){function a(e){(0,l.default)(this,a);var r=(0,i.default)(this,(a.__proto__||(0,t.default)(a)).call(this,e));return r._getMovieDetail=function(){(0,v.request)({method:"get",url:"/api/v0/movies/"+r.state._id}).then(function(e){console.log("res",e);var t=e.movie,a=e.relativeMovies,l=q+t.videoKey,n=q+t.coverKey;console.log(t.meta.createdAt),r.setState({movie:t,relativeMovies:a},function(){r.player=new _({container:document.getElementById("videoPlayer"),screenshot:!0,video:{url:l,pic:n,thumbnails:n}})})}).catch(function(){r.setState({movie:{}}),r.props.history.goBack()})},r.state={movie:null,relativeMovies:[],_id:r.props.match.params.id},r}return(0,d.default)(a,e),(0,n.default)(a,[{key:"componentDidMount",value:function(){this._getMovieDetail()}},{key:"render",value:function(){var e=this.state,t=e.movie,a=e.relativeMovies;return t?s.default.createElement("div",{className:"flex-row full"},s.default.createElement("div",{className:"page-shade"},s.default.createElement("div",{className:"video-wrapper"},s.default.createElement("div",{id:"videoPlayer",src:q+t.coverKey,"data-video":q+t.videoKey}),s.default.createElement("div",{className:"video-sidebar"},s.default.createElement(p.Link,{className:"homeLink",to:"/"},"回到首页"),s.default.createElement(h.Tabs,{defaultActiveKey:"1",onChange:k},s.default.createElement(g,{tab:"关于本篇",key:"1"},s.default.createElement("h1",null,t.title),s.default.createElement("dl",null,s.default.createElement("dt",null,"评分: ",s.default.createElement(h.Badge,{count:t.rate,style:{backgroundColor:"#52c41a"}}),"分"),s.default.createElement("dt",null,"电影分类：",t.tags&&t.tags.join(" ")),s.default.createElement("dt",null,"更新时间：",t.meta&&t.meta.createdAt&&(0,b.default)(t.meta.createdAt).fromNow()),s.default.createElement("dt",null,"影片介绍："),s.default.createElement("dt",null,t.summary))),s.default.createElement(g,{tab:"同类电影",key:"2"},a.map(function(e){return s.default.createElement(p.Link,{key:e._id,className:"media",to:"/detail/"+e._id},s.default.createElement("img",{width:"60",className:"align-self-center mr-3",src:q+e.posterKey}),s.default.createElement("div",{className:"media-body"},s.default.createElement("h6",{className:"media-title"},e.title),s.default.createElement("ul",{className:"list-unstyled"},e.pubdate&&e.pubdate.map(function(e,t){return s.default.createElement("li",{key:t},(0,b.default)(e.date).fromNow("YYYY.MM")," ",e.country)}))))}))))))):null}}]),a}(c.Component);exports.default=N;
},{"babel-runtime/core-js/object/get-prototype-of":102,"babel-runtime/helpers/classCallCheck":67,"babel-runtime/helpers/createClass":69,"babel-runtime/helpers/possibleConstructorReturn":66,"babel-runtime/helpers/inherits":68,"react":16,"../../layouts/default":46,"../../lib":52,"react-router-dom":14,"antd":56,"moment":60,"moment/locale/zh-cn":205}]},{},[22])