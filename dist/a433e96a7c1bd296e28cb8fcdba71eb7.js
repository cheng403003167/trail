require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({47:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("babel-runtime/core-js/object/get-prototype-of"),t=h(e),a=require("babel-runtime/helpers/classCallCheck"),l=h(a),r=require("babel-runtime/helpers/createClass"),n=h(r),o=require("babel-runtime/helpers/possibleConstructorReturn"),i=h(o),u=require("babel-runtime/helpers/inherits"),s=h(u),d=require("react"),c=h(d),p=require("moment"),m=h(p),f=require("antd"),y=require("react-router-dom");function h(e){return e&&e.__esModule?e:{default:e}}require("moment/locale/zh-cn");var v="http://www.dnitu.top/",b=f.Card.Meta;m.default.locale("zh-cn");var _=function(e){function a(){var e,r,n,o;(0,l.default)(this,a);for(var u=arguments.length,s=Array(u),d=0;d<u;d++)s[d]=arguments[d];return r=n=(0,i.default)(this,(e=a.__proto__||(0,t.default)(a)).call.apply(e,[this].concat(s))),n.state={visible:!1},n._handleClose=function(e){n.player&&n.player.pause&&n.player.pause()},n._handleCancel=function(e){n.setState({visible:!1})},n._jumpToDetail=function(){var e=n.props.url;e&&window.open(e)},n._showModal=function(e){n.setState({visible:!0});var t=v+e.videoKey,a=v+e.coverKey;n.player?(n.player.video.currentSrc!==t&&n.player.switchVideo({url:t,autoplay:!0,pic:a,type:"auto"}),n.player.play()):setTimeout(function(){n.player=new DPlayer({container:document.getElementsByClassName("videoModal")[0],screenshot:!0,autoplay:!0,video:{url:t,pic:a,thumbnails:a}})},500)},n._renderContent=function(){var e=n.props.movies;return c.default.createElement("div",{style:{padding:"30px"}},c.default.createElement(f.Row,null,e.map(function(e,t){return c.default.createElement(f.Col,{key:t,xl:{span:6},lg:{span:8},md:{span:12},sm:{span:24},style:{marginBottom:"8px"}},c.default.createElement(f.Card,{bordered:!1,hoverable:!0,style:{width:"100%"},actions:[c.default.createElement(f.Badge,null,c.default.createElement(f.Icon,{style:{marginRight:"2px"},type:"clock-circle"}),(0,m.default)(e.meta.createdAt).fromNow(!0),"前更新"),c.default.createElement(f.Badge,null,c.default.createElement(f.Icon,{style:{marginRight:"2px"},type:"star"}),e.rate," 分")],cover:c.default.createElement("img",{onClick:function(){return n._showModal(e)},src:v+e.posterKey+"?x-oss-process=image/resize,w_1080"})},c.default.createElement(b,{style:{height:"202px",overflow:"hidden"},title:c.default.createElement(y.Link,{to:"/detail/"+e._id},e.title),onClick:n._jumpToDetail,description:c.default.createElement(y.Link,{to:"/detail/"+e._id},e.summary)})))})),c.default.createElement(f.Modal,{className:"videoModal",footer:null,visible:n.state.visible,afterClose:n._handleClose,onCancel:n._handleCancel},c.default.createElement(f.Spin,{size:"large"})))},o=r,(0,i.default)(n,o)}return(0,s.default)(a,e),(0,n.default)(a,[{key:"render",value:function(){return c.default.createElement("div",{style:{padding:10}},this._renderContent())}}]),a}(d.Component);exports.default=_;
},{"babel-runtime/core-js/object/get-prototype-of":102,"babel-runtime/helpers/classCallCheck":67,"babel-runtime/helpers/createClass":69,"babel-runtime/helpers/possibleConstructorReturn":66,"babel-runtime/helpers/inherits":68,"react":16,"moment":60,"antd":56,"react-router-dom":14,"moment/locale/zh-cn":205}],30:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("babel-runtime/core-js/object/get-prototype-of"),t=_(e),r=require("babel-runtime/helpers/classCallCheck"),a=_(r),l=require("babel-runtime/helpers/createClass"),s=_(l),n=require("babel-runtime/helpers/possibleConstructorReturn"),u=_(n),i=require("babel-runtime/helpers/inherits"),o=_(i),c=require("react"),f=_(c),d=require("../../layouts/default"),m=_(d),p=require("../../lib"),h=require("./content"),y=_(h),v=require("antd");function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function r(e){(0,a.default)(this,r);var l=(0,u.default)(this,(r.__proto__||(0,t.default)(r)).call(this,e));return l._selectItem=function(e){var t=e.key;l.setState({selectedKey:t})},l._getAllMovies=function(){(0,p.request)(window.__LOADING__)({method:"get",url:"/api/v0/movies?type="+(l.state.type||"")+"&year="+(l.state.year||"")}).then(function(e){l.setState({movies:e})}).catch(function(){l.setState({movies:[]})})},l._renderContent=function(){var e=l.state.movies;return e&&e.length?f.default.createElement(y.default,{movies:e}):null},l.state={years:["2025","2024","2023","2022","2021","2020","2019","2018"],type:l.props.match.params.type,year:l.props.match.params.year,movies:[]},l}return(0,o.default)(r,e),(0,s.default)(r,[{key:"componentDidMount",value:function(){this._getAllMovies()}},{key:"render",value:function(){var e=this.state,t=e.years,r=e.selectedKey;return f.default.createElement(m.default,this.props,f.default.createElement("div",{className:"flex-row full"},f.default.createElement(v.Menu,{defaultSelectedKeys:[r],mode:"inline",style:{height:"100%",overflowY:"scroll",maxWidth:230},onSelect:this._selectItem,className:"align-self-start"},t.map(function(e,t){return f.default.createElement(v.Menu.Item,{key:t},f.default.createElement("a",{href:"/year/"+e},e," 年上映"))})),f.default.createElement("div",{className:"flex-1 scroll-y align-self-start"},this._renderContent())))}}]),r}(c.Component);exports.default=b;
},{"babel-runtime/core-js/object/get-prototype-of":102,"babel-runtime/helpers/classCallCheck":67,"babel-runtime/helpers/createClass":69,"babel-runtime/helpers/possibleConstructorReturn":66,"babel-runtime/helpers/inherits":68,"react":16,"../../layouts/default":46,"../../lib":52,"./content":47,"antd":56}]},{},[30])